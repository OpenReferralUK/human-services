<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">

    <script src="js/openreferralplus.js"></script>
    <script src="js/lib/pdlib/ajax.js"></script>
    <script src="js/lib/pdlib/utils.js"></script>
    <script src="js/lib/viz-js/viz.js"></script>
	<link rel="stylesheet" href="site.css" />
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <title>API on Open Referral database - extended</title>
	<meta name="description" content="Find out how you can use the Service Directory API with the API Query Tool." />
</head>
<body>
<div id="header_wrap" class="outer">
        <header class="inner">

            <div class="row">
                <div class="col">
                    <h1 id="project_title">API on Open Referral database - extended</h1>
                    <h2 id="project_tagline">Open Referral UK Data Standard</h2>
                    <!--        <h2 id="project_tagline">Extensions proposed by the English Local Government Association (LGA) and the local government OpenCommunity project to the OpenReferral standard for human services data.   Schema generator code is given to express the schema in various formats.  Data conversion routines to make it conform to the standard.  API that serves the data in a format compliant with the standard.</h2>-->
                </div>
                <div class="col-sm-4 col-md-2 align-content-end align-content-center-md" style="min-width: 20%; max-width: 40%">
                    <img class="img-fluid w-25-md w-50-lg" src="images/OpenReferralUK.png" alt="OpenreferralUk Logo" style="background-color: white">
                </div>
            </div>
        </header>
    </div>
    <div id="main_content_wrap" class="outer">
        <section>
            <div class="navbackground">
                <nav class="navbar navbar-expand-md navwidth navbar-dark">
                    <a class="navbar-brand" href="https://openreferraluk.org/">Open Referral UK</a>
                </nav>
            </div>
        </section>
        <section id="main_content" class="inner">
		<h1>API Query Tool</h1>
		 <p>Connect to your chosen API endpoint to query taxonomy and service data. Each API call is exposed to allow you to copy the syntax. You can also examine results in diagrammatic and JSON format to better understand the data structure.</p>
<div class="container-fluid" style="padding-left: 5%; padding-right: 5%">
    <div class="row">
        <div class="col-md-6 col-sm-8">
            <div class="row">
                <label class="ml-1" for="endpoint">Endpoint</label>
                <select id="endpoint" class="form-control"></select>
            </div>
            <div class="row">
                <h5 style="padding-top: 1%">
                    Get services
                </h5>
            </div>
            <div class="row">
                <div class="col-sm-4">
                    <div class="row">
                        <label class="ml-1" for="TaxonomyType">Taxonomy type</label>
                    </div>
                    <div class="row">
                        <select id="TaxonomyType" class="form-control mr-1" disabled="disabled">
                            <option>Any</option>
                            <option value="area">Area</option>
                            <option value="cost">Cost</option>
                            <option value="eligibility">Eligibility</option>
                            <option value="organization">Organization</option>
                            <option value="service">Service</option>
                        </select>
                    </div>
                </div>
                <div class="col-sm-8">
                    <div class="row">
                        <label class="ml-1" for="Keywords">Keywords</label>
                    </div>
                    <div class="row">
                        <input id="Keywords" class="form-control ml-1" disabled="disabled">
                    </div>
                </div>
            </div>
            <div class="row mt-2">
                <div class="col-sm-4">
                    <div class="row">
                        <label class="ml-1" for="Vocabulary">Vocabulary</label>
                    </div>
                    <div class="row">
                        <select id="Vocabulary" class="form-control mr-1" disabled="disabled">
                            <option></option>
                        </select>
                    </div>
                </div>
                <div class="col-sm-8">
                    <div class="row">
                        <div class="col">
                            <div class="row">
                                <label class="ml-1" for="TaxonomyTerm">Taxonomy term</label>
                            </div>
                            <div class="row">
                                <select id="TaxonomyTerm" class="form-control ml-1 mr-1" disabled="disabled">
                                    <option></option>
                                </select>
                            </div>
                        </div>
                        <div class="col">
                            <div class="row">
                                <label class="ml-1" for="ChildTaxonomyTerm">Child term</label>
                            </div>
                            <div class="row">
                                <select id="ChildTaxonomyTerm" class="form-control ml-1 mr-1" disabled="disabled">
                                    <option></option>
                                </select>
                            </div>
                        </div>
                        <div class="col" id="ChildChildTaxonomyTermDiv" style="display: none">
                            <div class="row">
                                <label for="ChildChildTaxonomyTerm">Child term</label>
                            </div>
                            <div class="row">
                                <select id="ChildChildTaxonomyTerm" class="form-control ml-1" disabled="disabled">
                                    <option></option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="RegularScheduleRow" class="row mt-2">
                <div class="col-sm-4">
                    <div class="row">
                        <label class="ml-1" for="Day">Day</label>
                    </div>
                    <div class="row">
                        <select id="Day" class="form-control mr-1" disabled="disabled">
                            <option value=""></option>
                            <option value="MO">Monday</option>
                            <option value="TU">Tuesday</option>
                            <option value="WE">Wednesday</option>
                            <option value="TH">Thursday</option>
                            <option value="FR">Friday</option>
                            <option value="SA">Saturday</option>
                            <option value="SU">Sunday</option>
                        </select>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="row">
                        <label class="ml-1" for="StartTime">Start time</label>
                    </div>
                    <div class="row">
                        <input id="StartTime" type="time" class="form-control ml-1 mr-1" disabled="disabled">
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="row">
                        <label class="ml-1" for="EndTime">End time</label>
                    </div>
                    <div class="row">
                        <input id="EndTime" type="time" class="form-control ml-1 mr-1" disabled="disabled">
                    </div>
                </div>
            </div>
            <div class="row mt-2" id="CoverageRow">
                <div class="col-sm-4">
                    <div class="row">
                        <label class="ml-1" for="Coverage">Coverage (postcode)</label>
                    </div>
                    <div class="row">
                        <input id="Coverage" class="form-control mr-1" disabled="disabled">
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="row">
                        <label class="ml-1" for="Proximity">Proximity (km)</label>
                    </div>
                    <div class="row">
                        <input id="Proximity" type="number" class="form-control ml-1 mr-1" disabled="disabled">
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="row">
                        <label class="ml-1">Min/Max age</label>
                        <label class="sr-only" for="minAge">Min age</label>
                        <label class="sr-only" for="maxAge">Max age</label>
                    </div>
                    <div class="row">
                        <div class="input-group">
                            <input id="minAge" type="number" class="form-control ml-1" disabled="disabled">
                            <input id="maxAge" type="number" class="form-control mr-1" disabled="disabled">
                        </div>
                    </div>
                </div>
            </div>

            <div class="row" style="padding-top: 3%">
                <div class="col-sm-8 pl-0 pr-0">
                    <button id="execute" class="btn btn-success form-control" disabled="disabled">
                        Execute query
                    </button>
                </div>
                <div class="col-sm-4 pr-2 pl-1">
                    <button id="clear" class="btn btn-secondary form-control ml-1">
                        Clear
                    </button>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-sm-4" id="api">
            <h5>API calls made:</h5>
        </div>
    </div>
</div>

<div id='tabs' style="padding: 3%">
    <ul class="nav nav-tabs">
        <li class="nav-item"><a id="resultTab" class="nav-link active" href="#resultPanel" data-toggle="tab">
            Results </a></li>
        <li class="nav-item"><a id="graphTab" class="nav-link disabled" href="#graphPanel" data-toggle="tab">
            Visualisation</a></li>
        <li class="nav-item"><a id="validateTab" class="nav-link disabled" href="#validatePanel" data-toggle="tab">
            Validate</a></li>
        <li class="nav-item"><a id="richnessTab" class="nav-link disabled" href="#richnessPanel" data-toggle="tab">
            Richness</a></li>
    </ul>

    <div class="tab-content">
        <div class="tab-pane active" id="resultPanel">
            <div id="results" class="col-sm-12" >

            </div>
        </div>
        <div class="tab-pane" id="graphPanel">
            <div id="graphLoading"></div>
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm2-2">
                        <label class="mr-1" for="format">Format</label>
                        <select id="format" class="form-control mr-1 mb-2" style="width:auto">
                            <option value="image">Image</option>
                            <option value="dot script">Dot script</option>
                            <option value="json">Json</option>
                        </select>
                    </div>

                    <div>
                        <label class="ml-1" for="allTables">Objects</label>
                        <select id="allTables" class="form-control ml-1 mb-2" style="width:auto">
                            <option value="false">Populated</option>
                            <option value="true">All</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div id="graph" class="graph">

                </div>
            </div>
        </div>
        <div class="tab-pane" id="validatePanel">
            <div id="validate" class="col-sm-12" style="padding-left: 3%">

            </div>
        </div>
        <div class="tab-pane" id="richnessPanel">
            <div id="richness" class="col-sm-12 col-md-10 col-lg-8 mt-2" style="padding-left: 1%">

            </div>
        </div>
    </div>
</div>

</section>
    </div>

    <div id="footer_wrap" class="outer">
        <footer class="inner">
            <p class="copyright">Open Referral UK Data Standard maintained by <a href="https://github.com/OpenReferralUK">Open Referral UK</a></p>
        </footer>
    </div>

<script src="https://code.jquery.com/jquery-3.4.1.min.js"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>
<script src="apisearch.js"></script>
</body>
</html>
